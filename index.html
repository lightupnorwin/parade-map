<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Light Up Norwin Parade Map</title>
  <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />
  <style>
    html, body { height: 100%; margin: 0; }
    #map { height: 100%; width: 100%; }

    /* Filter bar */
    .filter-bar {
      position: absolute;
      top: 10px;
      left: 50%;
      transform: translateX(-50%);
      display: flex;
      gap: 10px;
      padding: 6px 10px;
      background: #fff;
      border-radius: 12px;
      box-shadow: 0 2px 10px rgba(0,0,0,0.25);
      z-index: 1000;
      flex-wrap: wrap;
      justify-content: center;
    }
    .filter-btn {
      border-radius: 999px;
      padding: 6px 12px;
      font-weight: 700;
      cursor: pointer;
      transition: .2s ease;
      user-select: none;
      border: 2px solid transparent;
      color: #fff;
    }
    .filter-btn.Restrooms { background: #007aff; border-color: #007aff; }
    .filter-btn.Events    { background: #ff3b30; border-color: #ff3b30; }
    .filter-btn.Food      { background: #34c759; border-color: #34c759; }
    .filter-btn.Shopping  { background: #af52de; border-color: #af52de; }
    .filter-btn.inactive  { background: #fff !important; color: #333 !important; }

    /* Popup styling */
    .leaflet-popup-content-wrapper {
      border-radius: 12px;
      box-shadow: 0 4px 15px rgba(0,0,0,0.3);
    }
    .popup h3 {
      margin: 0 0 4px;
      font-size: 16px;
      color: #222;
    }
    .popup p {
      margin: 0;
      font-size: 14px;
      line-height: 1.4;
    }

    /* Route line glow */
    @keyframes dash {
      to { stroke-dashoffset: -1000; }
    }
    .glow-line {
      stroke-dasharray: 10 6;
      stroke-linecap: round;
      animation: dash 20s linear infinite;
    }
  </style>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Light Up Norwin ‚Äî Quick Guide</title>
<link rel="preconnect" href="https://unpkg.com">
<style>
  :root { --brand:#1756ff; --ink:#111; --muted:#666; --bg:#fff; --card:#f7f7fb; }
  html,body{margin:0;padding:0;background:var(--bg);color:var(--ink);font-family:system-ui,-apple-system,Segoe UI,Roboto,Inter,Arial,sans-serif;}
  .wrap{max-width:780px;margin:0 auto;padding:16px 14px 28px;}
  header{display:flex;justify-content:space-between;align-items:center;gap:10px;margin:6px 0 14px}
  h1{font-size:20px;margin:0}
  .grid{display:grid;grid-template-columns:1fr 1fr;gap:10px;margin:10px 0 18px}
  .btn{display:flex;align-items:center;justify-content:center;gap:.5rem;border-radius:12px;padding:14px 12px;background:#fff;border:2px solid #eee;box-shadow:0 1px 6px rgba(0,0,0,.06);font-weight:700;text-decoration:none;color:var(--ink);text-align:center}
  .btn:active{transform:scale(.98)}
  .btn.primary{background:var(--brand);border-color:var(--brand);color:#fff}
  .card{background:var(--card);border-radius:14px;padding:12px 14px}
  .card h2{font-size:16px;margin:0 0 8px}
  .row{display:flex;justify-content:space-between;gap:8px;align-items:center;padding:8px 0;border-top:1px solid #e8e8ef}
  .row:first-child{border-top:0}
  .time{font-weight:700;min-width:84px}
  .muted{color:var(--muted)}
  footer{margin-top:18px;font-size:12px;color:var(--muted);text-align:center}
</style>
</head>
<body>
  <div id="map"></div>
<div class="wrap">
  <header>
    <h1>üéÑ Light Up Norwin ‚Äî Quick Guide</h1>
    <a class="btn primary" href="./map.html">Open Interactive Map</a>
  </header>

  <div class="filter-bar">
    <button class="filter-btn Restrooms" data-category="Restrooms">Restrooms</button>
    <button class="filter-btn Events" data-category="Events">Events</button>
    <button class="filter-btn Food" data-category="Food">Food &amp; Beverage</button>
    <button class="filter-btn Shopping" data-category="Shopping">Shopping</button>
  <!-- Quick actions -->
  <div class="grid">
    <a class="btn" href="#schedule">üìÖ Schedule</a>
    <a class="btn" href="#restrooms">üöª Restrooms</a>
    <a class="btn" href="#route">üó∫Ô∏è Parade Route</a>
    <a class="btn" href="#food">üçî Food & Shopping</a>
  </div>

  <script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
  <script>
    const map = L.map('map', { zoomControl: true }).setView([40.332, -79.7105], 18);

    // --- Base tiles ---
    L.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png", {
      maxZoom: 20,
      attribution: '&copy; OpenStreetMap contributors'
    }).addTo(map);

    const colors = {
      Restrooms: "#007aff",
      Events:    "#ff3b30",
      Food:      "#34c759",
      Shopping:  "#af52de"
    };

    // --- Icon builder (using emojis as fallback) ---
    function makeIcon(emoji, color) {
      const svg = encodeURIComponent(`
        <svg xmlns='http://www.w3.org/2000/svg' width='40' height='40'>
          <circle cx='20' cy='20' r='18' fill='${color}' />
          <text x='50%' y='55%' font-size='18' text-anchor='middle' fill='white'>${emoji}</text>
        </svg>
      `);
      return L.icon({
        iconUrl: "data:image/svg+xml," + svg,
        iconSize: [30, 30],
        iconAnchor: [15, 30],
        popupAnchor: [0, -28]
      });
    }

    const icons = {
      Restrooms: makeIcon("üöª", colors.Restrooms),
      Events:    makeIcon("üéÑ", colors.Events),
      Food:      makeIcon("üçî", colors.Food),
      Shopping:  makeIcon("üõçÔ∏è", colors.Shopping)
    };

    // --- Locations ---
    const locations = [
      { position: [40.3314911, -79.710878], name: "Restrooms", description: "Public restrooms at 415 Main St.", category: "Restrooms" },
      { position: [40.332795, -79.710338], name: "Tree Lighting", description: "At S&T Bank. Ceremony starts at 6 PM.", category: "Events" },
      { position: [40.332008, -79.711068], name: "Main Street Stage", description: "<strong>Schedule</strong><br>4:00 PM ‚Äì Band<br>6:00 PM ‚Äì Band", category: "Events" },
      { position: [40.331993, -79.710851], name: "Pretend Food Vendor", description: "Serving warm treats all evening.", category: "Food" },
      { position: [40.332086, -79.710864], name: "Pretend Craft Vendor", description: "Handmade gifts and holiday crafts.", category: "Shopping" }
    ];
  <!-- Schedule (today) -->
  <section id="schedule" class="card">
    <h2>Today‚Äôs Schedule</h2>
    <div class="row"><div><div class="time">4:00 PM</div></div><div>Main Street Stage ‚Äî Norwin Jazz Ensemble</div></div>
    <div class="row"><div><div class="time">5:45 PM</div></div><div>S&T Bank Plaza ‚Äî Tree Lighting Ceremony</div></div>
    <div class="row"><div><div class="time">6:15 PM</div></div><div>Parade Step-Off ‚Äî 4th St & Main</div></div>
    <div class="muted" style="margin-top:6px">Times subject to change. See map for live updates.</div>
  </section>

    const markers = [];
    function addMarker(loc) {
      const marker = L.marker(loc.position, { icon: icons[loc.category] })
        .bindPopup(`<div class="popup"><h3>${loc.name}</h3><p>${loc.description}</p></div>`);
      marker.category = loc.category;
      marker.addTo(map);
      markers.push(marker);
    }
    locations.forEach(addMarker);
  <!-- Restrooms -->
  <section id="restrooms" class="card" style="margin-top:12px">
    <h2>Restrooms</h2>
    <div class="row"><div>415 Main St (Public)</div>
      <div><a href="https://maps.apple.com/?q=415%20Main%20St%20Irwin%20PA" class="btn">Open in Maps</a></div></div>
    <div class="row"><div>Portable Units ‚Äî Near S&T Bank Plaza</div>
      <div><a href="https://maps.apple.com/?ll=40.332795,-79.710338" class="btn">Open in Maps</a></div></div>
  </section>

    // --- Auto fit to all markers ---
    const group = L.featureGroup(markers);
    map.fitBounds(group.getBounds(), { padding: [40, 40] });
  <!-- Parade Route -->
  <section id="route" class="card" style="margin-top:12px">
    <h2>Parade Route</h2>
    <div class="muted" style="margin-bottom:8px">From 4th St ‚Üí along Main St ‚Üí to 1st St (subject to municipal changes).</div>
    <!-- If you add route.png to the repo, it loads instantly even on bad data -->
    <img src="./route.png" alt="Parade Route" style="width:100%;border-radius:10px;display:block" />
    <div style="margin-top:8px">
      <a class="btn" href="./map.html">See on Interactive Map</a>
    </div>
  </section>

    // --- Parade route (placeholder polyline) ---
    const routeCoords = [
      [40.3313, -79.7115],
      [40.3321, -79.7105],
      [40.3330, -79.7097]
    ];
    const route = L.polyline(routeCoords, {
      color: "#FFD700",
      weight: 6,
      opacity: 0.9,
      className: "glow-line"
    }).addTo(map);
  <!-- Food & shopping -->
  <section id="food" class="card" style="margin-top:12px">
    <h2>Food & Shopping</h2>
    <div class="muted" style="margin-bottom:6px">Vendors line Main St near the stage and plaza.</div>
    <a class="btn" href="./map.html#Food">Show Food on Map</a>
    <a class="btn" href="./map.html#Shopping">Show Shopping on Map</a>
  </section>

    // --- Filter functionality ---
    const buttons = document.querySelectorAll('.filter-btn');
    buttons.forEach(btn => {
      btn.addEventListener('click', () => {
        btn.classList.toggle('inactive');
        updateMarkers();
      });
    });
  <footer>
    Problems or lost child? See the info table near S&T Bank Plaza. &middot; <a href="./map.html">Full Map</a>
  </footer>
</div>

    function updateMarkers() {
      const active = new Set(
        Array.from(buttons)
          .filter(b => !b.classList.contains('inactive'))
          .map(b => b.dataset.category)
      );
      markers.forEach(m => {
        if (active.has(m.category)) {
          m.addTo(map);
        } else {
          map.removeLayer(m);
        }
      });
    }
  </script>
<script>
// Optional: tiny client-side time tweak to bold ‚Äúhappening now‚Äù rows if you wire real times later.
</script>
</body>
</html>
