<!DOCTYPE html>
<html>
  <head>
    <title>Light Up Norwin Map</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <style>
      html, body, #map {
        height: 100%;
        margin: 0;
        padding: 0;
        font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;
      }
      #filterBar {
        position: absolute;
        top: 10px;
        left: 50%;
        transform: translateX(-50%);
        z-index: 999;
        display: flex;
        gap: 10px;
        background: rgba(255,255,255,0.9);
        border-radius: 10px;
        padding: 5px 10px;
        box-shadow: 0 2px 6px rgba(0,0,0,0.3);
      }
      .filter-btn {
        padding: 6px 12px;
        border: none;
        border-radius: 8px;
        cursor: pointer;
        background-color: #f0f0f0;
        font-weight: bold;
        transition: background-color 0.3s;
      }
      .filter-btn.active {
        background-color: white;
        box-shadow: 0 0 0 2px #007bff inset;
      }
    </style>
    <script src="https://maps.googleapis.com/maps/api/js?key=YOUR_API_KEY"></script>
    <script>
      let map;
      let markers = [];
      const filters = {
        Restrooms: true,
        Events: true,
        Food: true,
        Shopping: true
      };

      const categoryColors = {
        Restrooms: 'blue',
        Events: 'red',
        Food: 'green',
        Shopping: 'orange'
      };

      const locations = [
        {
          type: 'Restrooms',
          title: 'Restrooms',
          position: { lat: 40.3314911, lng: -79.710878 }
        },
        {
          type: 'Events',
          title: 'Main Street Stage',
          position: { lat: 40.332008, lng: -79.711068 },
          info: '<strong>Main Street Stage</strong><br>Band at 4:00 PM<br>Band at 6:00 PM'
        },
        {
          type: 'Events',
          title: 'Tree Lighting',
          position: { lat: 40.332795, lng: -79.710338 },
          info: '<strong>Tree Lighting</strong><br>Begins at dusk'
        },
        {
          type: 'Food',
          title: 'Food Vendor (Example)',
          position: { lat: 40.331993, lng: -79.710851 }
        },
        {
          type: 'Shopping',
          title: 'Craft Vendor (Example)',
          position: { lat: 40.332086, lng: -79.710864 }
        }
      ];

      function initMap() {
        map = new google.maps.Map(document.getElementById('map'), {
          center: { lat: 40.3321, lng: -79.7108 },
          zoom: 18,
          mapId: 'a6e39d81a25f4fd4' // Optional: Add your custom styled map ID here
        });

        addMarkers();
      }

      function addMarkers() {
        clearMarkers();
        locations.forEach(loc => {
          if (filters[loc.type]) {
            const marker = new google.maps.Marker({
              position: loc.position,
              map: map,
              title: loc.title,
              icon: {
                path: google.maps.SymbolPath.CIRCLE,
                scale: 8,
                fillColor: categoryColors[loc.type],
                fillOpacity: 1,
                strokeWeight: 1
              }
            });
            if (loc.info) {
              const infoWindow = new google.maps.InfoWindow({ content: loc.info });
              marker.addListener('click', () => infoWindow.open(map, marker));
            }
            markers.push(marker);
          }
        });
      }

      function clearMarkers() {
        markers.forEach(m => m.setMap(null));
        markers = [];
      }

      function toggleFilter(type) {
        filters[type] = !filters[type];
        document.getElementById('btn-' + type).classList.toggle('active', filters[type]);
        addMarkers();
      }

      window.onload = initMap;
    </script>
  </head>
  <body>
    <div id="filterBar">
      <button class="filter-btn active" id="btn-Restrooms" onclick="toggleFilter('Restrooms')">Restrooms</button>
      <button class="filter-btn active" id="btn-Events" onclick="toggleFilter('Events')">Events</button>
      <button class="filter-btn active" id="btn-Food" onclick="toggleFilter('Food')">Food & Beverage</button>
      <button class="filter-btn active" id="btn-Shopping" onclick="toggleFilter('Shopping')">Shopping</button>
    </div>
    <div id="map"></div>
  </body>
</html>
