<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Light Up Norwin Parade Map</title>
  <link
    rel="stylesheet"
    href="https://unpkg.com/leaflet/dist/leaflet.css"
  />
  <style>
    body, html {
      margin: 0;
      padding: 0;
      height: 100%;
      font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
      background: #111;
      color: #fff;
    }
    #map {
      width: 100%;
      height: calc(100% - 60px);
    }
    .filter-bar {
      display: flex;
      justify-content: center;
      gap: 12px;
      padding: 10px;
      background: #1c1c1c;
      box-shadow: 0 2px 6px rgba(0,0,0,0.6);
      position: sticky;
      top: 0;
      z-index: 1000;
    }
    .filter-btn {
      border: none;
      padding: 8px 16px;
      border-radius: 20px;
      font-size: 14px;
      cursor: pointer;
      color: #fff;
      font-weight: 600;
      transition: all 0.2s ease;
    }
    .filter-btn.active {
      transform: scale(1.05);
      box-shadow: 0 0 8px rgba(255,255,255,0.5);
    }
    .events { background: #e63946; }    /* red */
    .restrooms { background: #457b9d; } /* blue */
    .food { background: #f4a261; }      /* orange */
    .shopping { background: #9d4edd; }  /* purple */
  </style>
</head>
<body>
  <div class="filter-bar">
    <button class="filter-btn events active" onclick="filterMarkers('event')">Events</button>
    <button class="filter-btn restrooms active" onclick="filterMarkers('restroom')">Restrooms</button>
    <button class="filter-btn food active" onclick="filterMarkers('food')">Food</button>
    <button class="filter-btn shopping active" onclick="filterMarkers('shopping')">Shopping</button>
  </div>
  <div id="map"></div>

  <script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
  <script>
    const map = L.map("map").setView([40.3320, -79.7110], 18);

    L.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png", {
      maxZoom: 20,
      attribution: '&copy; <a href="https://www.openstreetmap.org/">OpenStreetMap</a>',
    }).addTo(map);

    const markers = [
      {
        position: [40.332008, -79.711068],
        name: "Main Street Stage",
        description: "Band at 4 PM, Band at 6 PM, Dance Group at 7 PM.",
        type: "event"
      },
      {
        position: [40.332795, -79.710338],
        name: "Tree Lighting",
        description: "Join us at S&T Bank at 6 PM.",
        type: "event"
      },
      {
        position: [40.3314911, -79.710878],
        name: "Restroom",
        description: "Portable restrooms available here.",
        type: "restroom"
      },
      {
        position: [40.331993, -79.710851],
        name: "Food Vendor",
        description: "Hot food and drinks served here.",
        type: "food"
      },
      {
        position: [40.332086, -79.710864],
        name: "Craft Vendor",
        description: "Handmade crafts and gifts.",
        type: "shopping"
      }
    ];

    const layerGroup = L.layerGroup().addTo(map);
    const markerMap = [];

    function renderMarkers() {
      layerGroup.clearLayers();
      markers.forEach(m => {
        if (activeFilters.includes(m.type)) {
          const marker = L.marker(m.position).bindPopup(
            `<strong>${m.name}</strong><br>${m.description}`
          );
          marker.addTo(layerGroup);
          markerMap.push({ marker, type: m.type });
        }
      });
    }

    let activeFilters = ["event","restroom","food","shopping"];

    function filterMarkers(type) {
      if (activeFilters.includes(type)) {
        activeFilters = activeFilters.filter(t => t !== type);
        document.querySelector(`.filter-btn.${type === "event" ? "events" : type+"s"}`).classList.remove("active");
      } else {
        activeFilters.push(type);
        document.querySelector(`.filter-btn.${type === "event" ? "events" : type+"s"}`).classList.add("active");
      }
      renderMarkers();
    }

    renderMarkers();
  </script>
</body>
</html>
